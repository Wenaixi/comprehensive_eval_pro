# 资源目录（图片/班会 Excel）

项目支持从本地资源目录中自动随机选图并上传（用于“劳动/军训/国旗下讲话/主题班会”等场景）。

## 目录结构

```
assets/images/
  国旗下讲话/          # 直接放图片文件（不要再套子文件夹）
  军训/                # 直接放图片文件（不要再套子文件夹）
  劳动/                # 直接放图片文件（不要再套子文件夹）
  主题班会/
    <某次班会资源包目录>/  # 一个班会一个文件夹，里面放图片 + 可选 .xls
```

## 图片格式

- 支持：`.jpg/.jpeg/.png/.webp/.bmp/.tif/.tiff`
- 上传前会自动转换为 JPG 再上传（临时文件，上传后自动清理，不会改动原图）

## 三类扁平目录规则（国旗/军训/劳动）

- 只扫描第一层文件（不递归子目录）
- 放多张会随机抽取一张

## 主题班会目录规则（重点）

- 目录结构：`assets/images/主题班会/<班会资源包目录>/`
- `<班会资源包目录>` 内至少 1 张图片；可额外放 1 份班会记录文件（支持多格式）
- 解析优先级（从简单到难，命中一个可用内容后就不再尝试其他文件）：
  1. `.xls/.xlsx`
  2. `.txt`
  3. `.docx/.doc`
  4. `.pdf`
- 依赖说明（可选能力）：
  - `.docx`：需要 `python-docx`
  - `.pdf`：需要 `PyPDF2`
  - `.doc`：解析依赖较重（`textract` 等），更建议你把 `.doc` 另存为 `.docx` 或 `.txt`
- 程序会尝试按日期优先匹配资源包目录：从任务名提取 `M.D / MM.DD / YYYY.M.D` 形式日期，与资源包目录名里的日期做匹配
  - 建议资源包目录名以日期开头，例如：`2025.9.29高一（8）班《百年薪火传，青春报国时》`

## Docker 提醒

默认 Docker 构建会忽略 `assets/images/`（避免镜像过大）。如需在 Docker 中使用本地资源，请用 volume 挂载该目录到容器内的 `/app/comprehensive_eval_pro/assets/images/`，或调整 `.dockerignore`。
